{% extends 'base.html' %}

{% block title %}Dashboard | RadiologyIS{% endblock %}

{% block content %}
<div class="container">
    <!-- Hero Section -->
    <div class="hero">
        <h1>Advanced Radiology Information System</h1>
        <p>Complete platform for DICOM management, remote reading, telehealth integration, and patient communication</p>
        <button class="btn btn-primary">Start Uploading DICOM Files</button>
    </div>

    <!-- Dashboard Section -->
    <div id="dashboard" class="section active">
        <h2>üìä Dashboard</h2>
                
        <div class="dashboard-stats">
            <div class="stat-card">
                <div class="stat-number">{{ total_dicom_studies }}</div>
                    <div>Total Studies</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">N/A</div>
                    <div>Pending Reads</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">N/A</div>
                    <div>Urgent Studies</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">{{ patients.count }}</div>
                    <div>Active Patients</div>
                </div>
            </div>

            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">üìÅ</div>
                    <h3>DICOM Upload & Management</h3>
                    <p>Secure upload and organization of DICOM images with automatic metadata extraction and validation.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üë©‚Äç‚öïÔ∏è</div>
                    <h3>Remote Reading</h3>
                    <p>Integration with third-party DICOM viewers for radiologists to read studies from anywhere.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üé•</div>
                    <h3>Telehealth Integration</h3>
                    <p>Seamless connection with telehealth platforms for virtual consultations and exam requests.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üìß</div>
                    <h3>Patient Communication</h3>
                    <p>Automated email notifications for appointments, results, and secure report sharing.</p>
                </div>
            </div>

            <h3>Recent Studies</h3>
            <table class="table">
                <thead>
                    <tr>
                        <th>Study ID</th>
                        <th>Patient</th>
                        <th>Exam Type</th>
                        <th>Date</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="studiesTable">
                    <tr>
                        <td>STU-001</td>
                        <td>John Doe</td>
                        <td>Chest X-Ray</td>
                        <td>2025-09-24</td>
                        <td><span class="status-badge status-pending">Pending</span></td>
                        <td><button class="btn btn-primary" onclick="openDICOMViewer('STU-001')">View</button></td>
                    </tr>
                    <tr>
                        <td>STU-002</td>
                        <td>Jane Smith</td>
                        <td>CT Abdomen</td>
                        <td>2025-09-23</td>
                        <td><span class="status-badge status-reading">Reading</span></td>
                        <td><button class="btn btn-primary" onclick="openDICOMViewer('STU-002')">View</button></td>
                    </tr>
                    <tr>
                        <td>STU-003</td>
                        <td>Mike Johnson</td>
                        <td>MRI Brain</td>
                        <td>2025-09-22</td>
                        <td><span class="status-badge status-completed">Completed</span></td>
                        <td><button class="btn btn-primary" onclick="viewReport('STU-003')">Report</button></td>
                    </tr>
                </tbody>
            </table>
        </div>

    <!-- Notification Container -->
    <div id="notification" class="notification"></div>
{% endblock %}